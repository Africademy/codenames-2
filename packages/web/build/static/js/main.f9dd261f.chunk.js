(this.webpackJsonpcodenames=this.webpackJsonpcodenames||[]).push([[0],{10:function(e,t,n){"use strict";function a(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),a(n(274)),a(n(118)),a(n(277)),a(n(278))},118:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MESSAGES={pong:"PONG",ping:"PING",login:"LOGIN",logout:"LOGOUT",joinGame:"JOIN_GAME",createGame:"CREATE_GAME",startGame:"START_GAME",chooseWord:"CHOOSE_WORD",playAgain:"PLAY_AGAIN",gameOver:"GAME_OVER",gameAborted:"GAME_ABORTED",words:"WORDS",playersInfo:"PLAYERS_INFO",spyMastersInfo:"SPYMASTERS_INFO",cardInfo:"CARD_INFO"}},162:function(e,t,n){e.exports=n(320)},167:function(e,t,n){},168:function(e,t,n){},272:function(e,t,n){},274:function(e,t,n){"use strict";function a(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),a(n(275)),a(n(276))},275:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RESPONSE_CODES={success:"SUCCESS",failed:"FAILED",loginFailed:"LOGIN_FAILED",loginSuccess:"LOGIN_SUCCESS",gameNotification:"GAME_NOTIFICATION"}},276:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.error=0]="error",e[e.info=1]="info"}(t.ResponseType||(t.ResponseType={}))},277:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(118);t.loginPayload=function(e){return{operation:a.MESSAGES.login,payload:{name:e}}},t.createGamePayload=function(e){return{operation:a.MESSAGES.createGame,payload:{playerId:e}}},t.joinGamePayload=function(e,t){return{operation:a.MESSAGES.joinGame,payload:{playerId:e,gameId:t}}},t.startGamePayload=function(e){return{operation:a.MESSAGES.startGame,payload:{gameId:e}}},t.pingPayload=function(){return{operation:a.MESSAGES.ping,payload:{ping:"ping"}}}},278:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Blue=0]="Blue",e[e.Red=1]="Red",e[e.Civilian=2]="Civilian",e[e.Assasin=3]="Assasin"}(t.CardType||(t.CardType={})),function(e){e[e.New=0]="New",e[e.InProgress=1]="InProgress",e[e.Over=2]="Over"}(t.GameStatus||(t.GameStatus={}))},281:function(e,t,n){},315:function(e,t){},320:function(e,t,n){"use strict";n.r(t);var a,r,o,i,c=n(0),s=n.n(c),u=n(13),l=n(19),m=n.n(l),f=(n(167),n(168),n(9)),p=n(7),h=n(15),d=n(16),b=n(327),g=n(330),v=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(f.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(b.a,{as:"h4",attached:"top"},"How to play!"),s.a.createElement(g.a,{attached:!0},s.a.createElement("ul",null,s.a.createElement("h5",null,"Sign-in"),s.a.createElement("li",null,"Sign in with any name to play"),s.a.createElement("li",null,"Afer successfully signed in the player will be added to the game pool and message will be notified to them."),s.a.createElement("li",null,"Once",s.a.createElement("u",null,s.a.createElement("i",null,s.a.createElement("b",null," 6 players")))," ","joined in the game pool the game will start and will be notified. Untill then you hav to wait."))))}}]),n}(c.Component),y=n(69),O=n(6),j=n.n(O),E=n(18),I=n(17),w=n(326),k=n(329),S=n(37),G=(n(272),Object(u.b)("store")(a=Object(u.c)(a=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).inputRef=void 0,a.onSignIn=Object(E.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.store.signIn(a.state.name);case 2:a.inputRef&&(a.inputRef.value="");case 3:case"end":return e.stop()}}),e)}))),a.state={name:""},a.handleChange=a.handleChange.bind(Object(I.a)(a)),a.onSignIn=a.onSignIn.bind(Object(I.a)(a)),a}return Object(p.a)(n,[{key:"store",get:function(){return this.props.store}}]),Object(p.a)(n,[{key:"render",value:function(){return s.a.createElement(w.a,{className:"form"},s.a.createElement(w.a.Group,{controlId:"formPlaintextEmail"},s.a.createElement(w.a.Label,{className:"label"},"Name"),s.a.createElement(w.a.Control,{plaintext:!0,placeholder:"your name goes here",className:"input",value:this.state.name,onChange:this.handleChange})),s.a.createElement(k.a,{variant:"primary",size:"lg",block:!0,className:"primary-button",onClick:this.onSignIn},"Sign In"))}},{key:"handleChange",value:function(e){this.setState({name:e.target.value})}}]),n}(c.Component))||a)||a),C=Object(u.b)("store")(r=Object(u.c)(r=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).onCreateGame=Object(E.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.store.createGame();case 2:case"end":return e.stop()}}),e)}))),a.onJoinGame=Object(E.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.store.joinGame(a.state.gameId);case 2:case"end":return e.stop()}}),e)}))),a.handleShow=Object(E.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.setState(Object(y.a)({},a.state,{show:!0}));case 1:case"end":return e.stop()}}),e)}))),a.handleClose=Object(E.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.setState(Object(y.a)({},a.state,{show:!1}));case 1:case"end":return e.stop()}}),e)}))),a.state={show:!1,gameId:""},a.onCreateGame=a.onCreateGame.bind(Object(I.a)(a)),a.onJoinGame=a.onJoinGame.bind(Object(I.a)(a)),a.handleShow=a.handleShow.bind(Object(I.a)(a)),a.handleClose=a.handleClose.bind(Object(I.a)(a)),a.handleGameIdChange=a.handleGameIdChange.bind(Object(I.a)(a)),a}return Object(p.a)(n,[{key:"store",get:function(){return this.props.store}}]),Object(p.a)(n,[{key:"render",value:function(){var e;return(null===(e=this.props.store)||void 0===e?void 0:e.user.isSignedIn)?s.a.createElement(s.a.Fragment,null,s.a.createElement(w.a,{className:"main-menu"},s.a.createElement(k.a,{variant:"primary",size:"lg",block:!0,className:"primary-button",onClick:this.onCreateGame},"Create New Game"),s.a.createElement("br",null),s.a.createElement(k.a,{variant:"primary",size:"lg",block:!0,className:"primary-button",onClick:this.handleShow},"Join Existing Game")),s.a.createElement(S.a,{show:this.state.show,onHide:this.handleClose,"aria-labelledby":"contained-modal-title-vcenter",centered:!0},s.a.createElement(S.a.Header,{closeButton:!0},s.a.createElement(S.a.Title,null,"Enter ID of game to join")),s.a.createElement(S.a.Body,null,s.a.createElement(w.a,{className:"form"},s.a.createElement(w.a.Group,{controlId:"formPlaintextEmail"},s.a.createElement(w.a.Control,{plaintext:!0,placeholder:"game ID goes here",className:"input",value:this.state.gameId,onChange:this.handleGameIdChange})))),s.a.createElement(S.a.Footer,null,s.a.createElement(k.a,{variant:"secondary",onClick:this.handleClose},"Close"),s.a.createElement(k.a,{variant:"primary",onClick:this.onJoinGame},"Join Game")))):s.a.createElement(G,null)}},{key:"handleGameIdChange",value:function(e){this.setState(Object(y.a)({},this.state,{gameId:e.target.value}))}}]),n}(c.Component))||r)||r,N=n(145),x=n(10),P=n(328),A=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).onClick=a.onClick.bind(Object(I.a)(a)),a}return Object(p.a)(n,[{key:"onClick",value:function(){this.props.onClick(this.props)}},{key:"render",value:function(){var e=this.props,t=e.word,n=e.type;return s.a.createElement(P.a,{style:{width:"12rem"}},s.a.createElement(P.a.Img,{variant:"top",src:this.typeImage(n)}),s.a.createElement(P.a.Body,null,s.a.createElement(P.a.Title,null,t)))}},{key:"typeImage",value:function(e){switch(e){case x.CardType.Assasin:return"../assets/images/assasin.jpg";case x.CardType.Blue:return"../assets/images/bue.jpeg";case x.CardType.Red:return"../assets/images/red.jpeg";default:return"../assets/images/civilian.jpg"}}}]),n}(c.Component),T=n(325),_=n(143),R=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).COLS=5,a.state={cardTable:a.cardTable(a.props.cards)},a}return Object(p.a)(n,[{key:"cardTable",value:function(e){var t=this,n=[],a=[];return e.forEach((function(e,r){a.push(e),0!==r&&(r+1)%t.COLS===0&&(n.push(a),a=[])})),n}},{key:"render",value:function(){var e=this.props.onCardClick;return this.state.cardTable.map((function(t){return s.a.createElement(T.a,null,t.map((function(t){return s.a.createElement(_.a,null,s.a.createElement(A,{word:t.word,type:t.type,onClick:e}))})))}))}}]),n}(c.Component),M=n(146),D=Object(u.b)("store")(o=Object(u.c)(o=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).onStartGame=Object(E.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.store.startGame();case 2:case"end":return e.stop()}}),e)}))),a.onStartGame=a.onStartGame.bind(Object(I.a)(a)),a}return Object(p.a)(n,[{key:"store",get:function(){return this.props.store}}]),Object(p.a)(n,[{key:"render",value:function(){if(this.store.game.status!==x.GameStatus.New)throw new Error("Cards need to be present");return s.a.createElement(S.a.Dialog,null,s.a.createElement(S.a.Header,null,s.a.createElement(S.a.Title,null,"Game Id: ",this.store.game.id)),s.a.createElement(S.a.Body,null,this.formattedPlayerNames),s.a.createElement(S.a.Footer,null,s.a.createElement(k.a,{variant:"primary",onClick:this.onStartGame},"Start Game")))}},{key:"formattedPlayerNames",get:function(){var e;return null===(e=this.store.game.players)||void 0===e?void 0:e.map((function(e){return s.a.createElement("h4",null,e,s.a.createElement("br",null))}))}}]),n}(c.Component))||o)||o;function L(){var e=Object(N.a)(["\n  flex: 1;\n"]);return L=function(){return e},e}var F,B=Object(u.b)("store")(i=Object(u.c)(i=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).handleSnackbarClose=function(){a.store.clearNotifications()},a.onCardClick=function(){},a}return Object(p.a)(n,[{key:"store",get:function(){return this.props.store}}]),Object(p.a)(n,[{key:"render",value:function(){if(this.store.game.status===x.GameStatus.New)return s.a.createElement(D,null);if(null==this.store.game.cards||0===this.store.game.cards.length)throw new Error("Cards need to be present");return s.a.createElement(R,{cards:this.store.game.cards,onCardClick:this.onCardClick})}}]),n}(c.Component))||i)||i,z=Object(M.a)(B)(L()),J=(n(281),Object(u.b)("store")(F=Object(u.c)(F=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){return Object(f.a)(this,n),t.call(this,e)}return Object(p.a)(n,[{key:"store",get:function(){return this.props.store}}]),Object(p.a)(n,[{key:"render",value:function(){return this.store.game.id?s.a.createElement(z,null):s.a.createElement(c.Fragment,null,s.a.createElement(v,null),s.a.createElement(C,null))}}]),n}(c.Component))||F)||F);var q=function(){return s.a.createElement(J,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var U,H,W,Y,V,$,K,Q=n(67),X=n(29),Z=(n(282),n(8)),ee=n(68),te=n(149).connect("http://localhost:4500/",{timeout:2e5}),ne=function(){function e(t){Object(f.a)(this,e),this.subscribeToNotifications=t,te.on("data",this.subscribeToNotifications)}return Object(p.a)(e,[{key:"signIn",value:function(e){return this.sendRequest(Object(x.loginPayload)(e))}},{key:"createGame",value:function(e){return this.sendRequest(Object(x.createGamePayload)(e))}},{key:"joinGame",value:function(e,t){return this.sendRequest(Object(x.joinGamePayload)(e,t))}},{key:"startGame",value:function(e){return this.sendRequest(Object(x.startGamePayload)(e))}},{key:"leaveGame",value:function(){te.disconnect()}},{key:"ping",value:function(){return this.sendRequest(Object(x.pingPayload)())}},{key:"openConnection",value:function(){te.connected||te.connect()}},{key:"sendRequest",value:function(e){return this.openConnection(),new Promise((function(t,n){te.emit("data",e,(function(e,a){e?n(e):(a.type===x.ResponseType.error&&n(a.message),t(a.payload||!0))}))}))}}]),e}(),ae=new(U=Object(ee.persist)("object"),H=Object(ee.persist)("object"),W=Object(ee.persist)("object"),Y=function(){function e(){var t=this;Object(f.a)(this,e),Object(Q.a)(this,"gameInfo",V,this),Object(Q.a)(this,"userInfo",$,this),Object(Q.a)(this,"notificationText",K,this),this.gameService=void 0,this.subscribeToNotifications=function(e){console.log("Got response: ".concat(e));var n=e.message;if(n)t.gameInfo.error=n;else{var a=e.payload||{},r=a.action,o=void 0===r?"":r,i=a.data,c=void 0===i?{}:i;switch(o){case x.MESSAGES.words:console.log(c),t.gameInfo.cards=c.words.map((function(e){return{word:e}})),t.gameInfo.status=x.GameStatus.InProgress;break;case x.MESSAGES.playersInfo:t.gameInfo.players=c.players;break;default:console.log("Default case. Shouldn't hit this")}}},this.gameService=new ne(this.subscribeToNotifications),this.initializeStore()}return Object(p.a)(e,[{key:"ping",value:function(){var e=Object(E.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.gameService.ping();case 3:this.gameInfo.isConnected=!0,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),this.gameInfo.error=e.t0;case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(){return e.apply(this,arguments)}}()},{key:"signIn",value:function(){var e=Object(E.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.clearNotifications(),e.prev=1,e.next=4,this.gameService.signIn(t);case 4:n=e.sent,this.setUserInfo(n),this.userInfo.isSignedIn=!0,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),this.gameInfo.error=e.t0;case 12:case"end":return e.stop()}}),e,this,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"setUserInfo",value:function(e){this.userInfo=e}},{key:"createGame",value:function(){var e=Object(E.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.userInfo.id){e.next=2;break}throw new Error("Login first");case 2:return e.prev=2,e.next=5,this.gameService.createGame(this.userInfo.id);case 5:t=e.sent,this.gameInfo=t,this.userInfo.gameId=t.id,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),this.gameInfo.error=e.t0;case 13:case"end":return e.stop()}}),e,this,[[2,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"joinGame",value:function(){var e=Object(E.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.userInfo.id){e.next=2;break}throw new Error("Login first");case 2:return e.prev=2,e.next=5,this.gameService.joinGame(this.userInfo.id,t);case 5:n=e.sent,this.gameInfo=n,this.userInfo.gameId=n.id,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),this.gameInfo.error=e.t0;case 13:case"end":return e.stop()}}),e,this,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"startGame",value:function(){var e=Object(E.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.gameInfo.id){e.next=2;break}throw new Error("Ned to join game first");case 2:return e.prev=2,e.next=5,this.gameService.startGame(this.gameInfo.id);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),this.gameInfo.error=e.t0;case 10:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"leaveGame",value:function(){this.gameService.leaveGame(),this.initializeStore()}},{key:"clearNotifications",value:function(){this.notificationText=""}},{key:"initializeStore",value:function(){this.gameInfo={},this.userInfo={},this.userInfo.isSignedIn=!1}},{key:"user",get:function(){return this.userInfo}},{key:"game",get:function(){return this.gameInfo}},{key:"newNotification",get:function(){return!!this.notificationText}},{key:"notification",get:function(){return this.notificationText}}]),e}(),V=Object(X.a)(Y.prototype,"gameInfo",[U,Z.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),$=Object(X.a)(Y.prototype,"userInfo",[H,Z.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),K=Object(X.a)(Y.prototype,"notificationText",[W,Z.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Object(X.a)(Y.prototype,"user",[Z.computed],Object.getOwnPropertyDescriptor(Y.prototype,"user"),Y.prototype),Object(X.a)(Y.prototype,"game",[Z.computed],Object.getOwnPropertyDescriptor(Y.prototype,"game"),Y.prototype),Object(X.a)(Y.prototype,"newNotification",[Z.computed],Object.getOwnPropertyDescriptor(Y.prototype,"newNotification"),Y.prototype),Object(X.a)(Y.prototype,"notification",[Z.computed],Object.getOwnPropertyDescriptor(Y.prototype,"notification"),Y.prototype),Y);n(318),n(319);m.a.render(s.a.createElement(u.a,{store:ae},s.a.createElement(q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[162,1,2]]]);
//# sourceMappingURL=main.f9dd261f.chunk.js.map